<div>

    <md-content class="md-padding">
        <h2 flex>Status</h2>
        <md-tabs md-selected="selectedTabIndex" flex>
            <md-tab label="All responses ({{ data.responses | noccaDataObjectLength }})">
                <md-content class="md-spacing">

                    <md-list>
                        <md-list-item ng-repeat="(hash, response) in data.responses track by hash">

                            <nocca-widgets-response response="response"></nocca-widgets-response>

                            <md-divider></md-divider>
                        </md-list-item>
                    </md-list>

                </md-content>
            </md-tab>
            <md-tab label="By Endpoints ({{ data.endpoints | noccaDataObjectLength }})" ng-disabled="!data.endpoints">

                <md-content>

                    <section ng-repeat="(endpoint, hashKeys) in data.endpoints track by endpoint">

                        <md-subheader class="md-primary">{{ endpoint }}</md-subheader>

                        <md-list>
                            <md-item ng-repeat="hashKey in hashKeys | noccaDataUnique">

                                <nocca-widgets-response response="data.responses[hashKey]"></nocca-widgets-response>

                                <md-divider></md-divider>

                            </md-item>
                        </md-list>

                    </section>

                </md-content>

            </md-tab>
            <md-tab label="Recorded ({{ data.recorded.length }})" ng-disabled="!data.recorded.length">

                <md-content>
                    <section>

                        <md-list>
                            <md-item ng-repeat="hashKey in data.recorded track by $index">

                                <nocca-widgets-response response="data.responses[hashKey]"></nocca-widgets-response>

                                <md-divider></md-divider>

                            </md-item>
                        </md-list>

                    </section>

                </md-content>

            </md-tab>

            <md-tab label="Forwarded ({{ data.forwarded.length }})" ng-disabled="!data.forwarded.length">

                <md-content ng-show="data.forwarded.length">
                    <section>

                        <md-list>
                            <md-item ng-repeat="hashKey in data.forwarded track by $index">

                                <nocca-widgets-response response="data.responses[hashKey]"></nocca-widgets-response>

                                <md-divider></md-divider>

                            </md-item>
                        </md-list>

                    </section>

                </md-content>

            </md-tab>

            <md-tab label="Replayed ({{ data.replayed.length }})" ng-disabled="!data.replayed.length">

                <md-content>

                    <section>

                        <md-list>
                            <md-item ng-repeat="hashKey in data.replayed track by $index">

                                <nocca-widgets-response response="data.responses[hashKey]"></nocca-widgets-response>

                                <md-divider></md-divider>

                            </md-item>
                        </md-list>

                    </section>

                </md-content>

            </md-tab>

            <md-tab label="Story">

                    <p ng-repeat="line in data.storyLog.slice().reverse() track by $index" class="nocca-story-line">
                        <span class="nocca-story-timestamp">{{ line.timestamp }}</span><br>

                        <span ng-class="{'fa-circle': line.rec}" class="fa fa-fw"></span>
                        <span ng-class="{'fa-sign-out': line.fwd}" class="fa fa-fw"></span>
                        <span ng-class="{'fa-play': line.rpl}" class="fa fa-fw"></span>
                        <span ng-class="{'fa-question': line.miss}" class="fa fa-fw"></span>

                        <span>{{ line.line }}</span>
                    </p>

            </md-tab>

        </md-tabs>

        <md-content layout="row" class="md-padding">

            <md-button ng-click="downloadAll()" ng-disabled="!data.recorded.length">

                <span class="fa fa-cloud-download"></span>
                Download recorded ({{ data.recorded.length }})

            </md-button>

            <span flex></span>
            <md-button ng-click="showRaw = !showRaw">
                <span class="fa" ng-class="{'fa-eye': showRaw, 'fa-eye-slash': !showRaw}"></span>
                raw data
            </md-button>
        </md-content>

        <pre ng-show="showRaw">{{ data | json:4 }}</pre>

    </md-content>
</div>